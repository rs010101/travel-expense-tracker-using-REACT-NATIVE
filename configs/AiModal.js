const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};


 export const chatSession = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {text: "Generate Travel Plan for Location: New York USA, for 1 Days and 1 Night for Familt with a Luxury budget with a Flight Details, Flight Price with Booking url, HOtels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 1 days and 1 night with each day plan with best time to visit in JSON format."},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "Okay, here's a luxury 1-day/1-night New York City itinerary designed for a family, complete with flight information, hotel options, and points of interest, all formatted in JSON. Note that pricing is highly variable and should be verified at the time of booking.  Also, booking URLs are provided as examples and might require adjustments based on availability.\n\n```json\n{\n  \"travelPlan\": {\n    \"location\": \"New York, USA\",\n    \"duration\": \"1 Day, 1 Night\",\n    \"budget\": \"Luxury\",\n    \"travelers\": \"Family\",\n    \"flightDetails\": {\n      \"departureAirport\": \"Your Departure Airport (e.g., LAX)\",\n      \"arrivalAirport\": \"JFK\",\n      \"airline\": \"Delta/United/American (Choose based on preference)\",\n      \"flightPrice\": {\n        \"estimatedPrice\": 800,\n        \"currency\": \"USD\",\n        \"notes\": \"Price is per person and varies widely.  Book in advance for better rates.\"\n      },\n      \"bookingUrl\": \"https://www.google.com/flights\",\n      \"flightTimings\": \"Arrive at JFK around 9:00 AM and depart at 8:00 PM the next day\"\n    },\n    \"hotelOptions\": [\n      {\n        \"hotelName\": \"The Peninsula New York\",\n        \"hotelAddress\": \"700 5th Ave, New York, NY 10019\",\n        \"price\": {\n          \"estimatedPrice\": 1200,\n          \"currency\": \"USD\",\n          \"notes\": \"Price per night for a suite or connecting rooms.\"\n        },\n        \"hotelImageUrl\": \"https://www.peninsula.com/en/new-york/5-star-luxury-hotel-midtown\",\n        \"geoCoordinates\": {\n          \"latitude\": 40.7626,\n          \"longitude\": -73.9731\n        },\n        \"rating\": 4.7,\n        \"description\": \"Luxury hotel in Midtown Manhattan with exceptional service, a rooftop terrace, and a spa.\",\n        \"nearbyPlaces\": [\n          \"Central Park (walking distance)\",\n          \"St. Patrick's Cathedral\",\n          \"Fifth Avenue shopping\"\n        ]\n      },\n      {\n        \"hotelName\": \"The Ritz-Carlton New York, Central Park\",\n        \"hotelAddress\": \"50 Central Park S, New York, NY 10019\",\n        \"price\": {\n          \"estimatedPrice\": 1400,\n          \"currency\": \"USD\",\n          \"notes\": \"Price per night for a suite or connecting rooms.\"\n        },\n        \"hotelImageUrl\": \"https://www.ritzcarlton.com/en/hotels/new-york/central-park\",\n        \"geoCoordinates\": {\n          \"latitude\": 40.7652,\n          \"longitude\": -73.9767\n        },\n        \"rating\": 4.8,\n        \"description\": \"Overlooking Central Park, this hotel offers luxurious accommodations, fine dining, and unparalleled park views.\",\n        \"nearbyPlaces\": [\n          \"Central Park (directly across the street)\",\n          \"Columbus Circle\",\n          \"Lincoln Center\"\n        ]\n      },\n            {\n        \"hotelName\": \"Four Seasons Hotel New York Downtown\",\n        \"hotelAddress\": \"27 Barclay St, New York, NY 10007\",\n        \"price\": {\n          \"estimatedPrice\": 1100,\n          \"currency\": \"USD\",\n          \"notes\": \"Price per night for a suite or connecting rooms.\"\n        },\n        \"hotelImageUrl\": \"https://www.fourseasons.com/newyorkdowntown/\",\n        \"geoCoordinates\": {\n          \"latitude\": 40.7121,\n          \"longitude\": -74.0099\n        },\n        \"rating\": 4.6,\n        \"description\": \"Located in the heart of Downtown, this hotel offers luxurious accommodations, spa and fine dining experience.\",\n        \"nearbyPlaces\": [\n          \"One World Observatory\",\n          \"World Trade Center Memorial\",\n          \"Brookfield Place\"\n        ]\n      }\n    ],\n    \"dailyPlan\": {\n      \"day1\": {\n        \"theme\": \"Iconic NYC & Broadway\",\n        \"bestTimeToVisit\": \"All Day\",\n        \"morning\": {\n          \"activity\": \"Visit Times Square & Top of the Rock\",\n          \"time\": \"9:30 AM - 12:00 PM\",\n          \"details\": {\n            \"placeName\": \"Times Square\",\n            \"placeDetails\": \"Experience the energy of Times Square. Great for photos, but be prepared for crowds.\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Times_Square_October_2018.jpg/1200px-Times_Square_October_2018.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.7589,\n              \"longitude\": -73.9851\n            },\n            \"ticketPricing\": {\n              \"cost\": \"Free (Top of the Rock tickets extra)\",\n              \"currency\": \"USD\"\n            },\n            \"travelTimeFromHotel\": \"15-20 minutes (depending on hotel location and transport)\"\n          },\n          \"activity2\": \"Top of the Rock Observation Deck\",\n          \"time\": \"11:00 AM - 12:00 PM\",\n          \"details\": {\n            \"placeName\": \"Top of the Rock\",\n            \"placeDetails\": \"Get panoramic views of the city from the top of Rockefeller Center.\",\n            \"placeImageUrl\": \"https://www.rockefellercenter.com/wp-content/uploads/2023/08/Top-of-the-Rock-Observation-Deck-Views-1440x960.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.7590,\n              \"longitude\": -73.9790\n            },\n            \"ticketPricing\": {\n              \"adult\": 40,\n              \"child\": 34,\n              \"currency\": \"USD\"\n            }\n          }\n        },\n        \"afternoon\": {\n          \"activity\": \"Lunch & Central Park Carriage Ride\",\n          \"time\": \"12:30 PM - 3:00 PM\",\n          \"details\": {\n            \"placeName\": \"Lunch near Central Park\",\n            \"placeDetails\": \"Enjoy a delicious lunch at a restaurant near Central Park. Many fine dining options available.\",\n             \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/93/4f/13/the-smith-lincoln-center.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.7685,\n              \"longitude\": -73.9816\n            },\n            \"ticketPricing\": {\n              \"cost\": \"Varies by restaurant\",\n              \"currency\": \"USD\"\n            },\n            \"travelTimeFromTimesSquare\": \"10 minutes (taxi/subway)\"\n          },\n          \"activity2\": \"Central Park Carriage Ride\",\n          \"time\": \"1:30 PM - 2:30 PM\",\n          \"details\": {\n            \"placeName\": \"Central Park\",\n            \"placeDetails\": \"Take a relaxing horse-drawn carriage ride through Central Park.\",\n            \"placeImageUrl\": \"https://www.centralpark.com/downloads/17185/download/carraige-ride.jpg?cb=c0e7d02f157895522150b2a0ef444702&w=640\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.7829,\n              \"longitude\": -73.9654\n            },\n            \"ticketPricing\": {\n              \"cost\": 180,\n              \"currency\": \"USD\"\n            }\n          }\n        },\n        \"evening\": {\n          \"activity\": \"Pre-Theater Dinner & Broadway Show\",\n          \"time\": \"5:00 PM - 10:00 PM\",\n          \"details\": {\n            \"placeName\": \"Pre-Theater Dinner\",\n            \"placeDetails\": \"Enjoy a fine dining experience before the Broadway show.\",\n            \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1c/e6/a3/78/the-lambs-club.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.7576,\n              \"longitude\": -73.9857\n            },\n            \"ticketPricing\": {\n              \"cost\": \"Varies by restaurant\",\n              \"currency\": \"USD\"\n            },\n            \"travelTimeFromCentralPark\": \"15-20 minutes (taxi)\"\n          },\n          \"activity2\": \"Broadway Show\",\n          \"time\": \"8:00 PM - 10:00 PM\",\n          \"details\": {\n            \"placeName\": \"Choose a Broadway Show\",\n            \"placeDetails\": \"Select a family-friendly Broadway show in advance. Book tickets well in advance!\",\n            \"placeImageUrl\": \"https://images.unsplash.com/photo-1522037087753-2a9b51c3d565?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YnJvYWR3YXklMjBzaG93fGVufDB8fDB8fHx8MA%3D%3D\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.7589,\n              \"longitude\": -73.9851\n            },\n            \"ticketPricing\": {\n              \"adult\": 150,\n              \"child\": 100,\n              \"currency\": \"USD\"\n            }\n          },\n            \"activity3\": \"Rooftop Bar\",\n            \"time\": \"10:30 PM\",\n            \"details\": {\n              \"placeName\": \"Bar 54\",\n              \"placeDetails\": \"Enjoy a drink at one of the highest rooftop bars in New York\",\n              \"placeImageUrl\": \"https://res.cloudinary.com/dtcms82in/image/upload/v1/prod/bar54nyc.com/523746/Bar_54_Rooftop_Bar_Times_Square_19_uq41b3.jpg\",\n              \"geoCoordinates\": {\n                \"latitude\": 40.7589,\n                \"longitude\": -73.9851\n              }\n            }\n        }\n      },\n      \"day2\": {\n        \"theme\": \"Downtown Exploration & Departure\",\n        \"bestTimeToVisit\": \"Morning/Afternoon\",\n        \"morning\": {\n          \"activity\": \"Visit the 9/11 Memorial & Museum\",\n          \"time\": \"9:00 AM - 11:00 AM\",\n          \"details\": {\n            \"placeName\": \"9/11 Memorial & Museum\",\n            \"placeDetails\": \"Pay your respects at the 9/11 Memorial and learn about the events of that day at the museum. Can be emotionally intense.\",\n            \"placeImageUrl\": \"https://www.911memorial.org/sites/default/files/styles/hero/public/collection_landing_hero_1440x750_0.jpg?itok=W5fX7KCm\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.7115,\n              \"longitude\": -74.0131\n            },\n            \"ticketPricing\": {\n              \"adult\": 26,\n              \"child\": 15,\n              \"currency\": \"USD\"\n            },\n            \"travelTimeFromHotel\": \"20-30 minutes (depending on hotel location and transport)\"\n          }\n        },\n        \"afternoon\": {\n          \"activity\": \"Explore the Financial District & One World Observatory\",\n          \"time\": \"11:30 AM - 2:30 PM\",\n          \"details\": {\n            \"placeName\": \"Wall Street & Financial District\",\n            \"placeDetails\": \"Walk through Wall Street and see the New York Stock Exchange.\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/NYSE_street_scene.jpg/1200px-NYSE_street_scene.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.7071,\n              \"longitude\": -74.0113\n            },\n            \"ticketPricing\": {\n              \"cost\": \"Free\"\n            },\n            \"travelTimeFrom911Memorial\": \"5-10 minutes (walking)\"\n          },\n            \"activity2\": \"One World Observatory\",\n            \"time\": \"1:00 PM - 2:30 PM\",\n            \"details\": {\n              \"placeName\": \"One World Observatory\",\n              \"placeDetails\": \"Take a ride to top of the tallest building in the Western Hemisphere\",\n              \"placeImageUrl\": \"https://www.getyourguide.com/blog/wp-content/uploads/2023/03/one-world-trade-center-image.jpg\",\n              \"geoCoordinates\": {\n                \"latitude\": 40.7127,\n                \"longitude\": -74.0134\n              },\n              \"ticketPricing\": {\n                \"cost\": 45,\n                \"currency\": \"USD\"\n              }\n            }\n        },\n        \"evening\": {\n          \"activity\": \"Early Dinner & Head to Airport\",\n          \"time\": \"4:00 PM - 6:00 PM\",\n          \"details\": {\n            \"placeName\": \"Dinner near Financial District\",\n            \"placeDetails\": \"Enjoy a final New York meal before heading to the airport. Many restaurants with diverse cuisines are available.\",\n            \"placeImageUrl\": \"https://www.nydailynews.com/wp-content/uploads/2023/08/AP23222697046954.jpg?w=630\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.7071,\n              \"longitude\": -74.0113\n            },\n            \"ticketPricing\": {\n              \"cost\": \"Varies by restaurant\",\n              \"currency\": \"USD\"\n            },\n            \"travelTimeFromOneWorld\": \"5-10 minutes (walking)\"\n          },\n          \"activity2\": \"Travel to JFK Airport\",\n          \"time\": \"6:00 PM - 7:00 PM\",\n          \"details\": {\n            \"placeName\": \"JFK Airport\",\n            \"placeDetails\": \"Allow ample time for travel to JFK, check-in, and security.\",\n            \"placeImageUrl\": \"https://media.cntraveler.com/photos/64c87496ca111a51a4216450/master/pass/jfk-airport-lede.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 40.6413,\n              \"longitude\": -73.7781\n            },\n            \"travelTimeFromFinancialDistrict\": \"1 hour - 1.5 hours (taxi/subway+AirTrain)\"\n          }\n        }\n      }\n    },\n    \"notes\": \"This is a suggested itinerary and can be customized to your family's interests and preferences.  Consider purchasing a CityPASS for discounts on attractions. Pre-booking tickets and making reservations is highly recommended, especially for a luxury trip and popular attractions.\"\n  }\n}\n```\n\n**Important Considerations:**\n\n*   **Flexibility:** This is a tight schedule.  Prioritize what's most important to your family and be prepared to adjust.\n*   **Transportation:**  NYC traffic can be unpredictable.  Use a combination of taxis, subways, and walking to get around efficiently.  Consider a private car service for a more luxurious and convenient experience.\n*   **Reservations:**  Book flights, hotels, Broadway tickets, and restaurant reservations *well* in advance.\n*   **CityPASS:** Look into the NYC CityPASS or similar discount cards if you plan to visit multiple attractions.\n*   **Child-Friendly Options:**  Adapt the itinerary to your children's ages and interests.  Consider the American Museum of Natural History or the Children's Museum of Manhattan as alternatives.\n*   **Contingency:** Build in some buffer time in case of delays.\n*   **Luxury:** Since this is a luxury trip, don't hesitate to upgrade experiences (private tours, exclusive dining, etc.).\n*   **Food:** New York has world class food and restaurants. Make sure to make reservations for dinners well in advance.\n"},
        ],
      },
    ],
  });

  // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
  // console.log(result.response.text());


